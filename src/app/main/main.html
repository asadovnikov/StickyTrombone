<div >
  <md-button class="md-fab md-mini" aria-label="Eat cake" ng-click="main.createPost($event)" >
    <i class="material-icons">add</i>
  </md-button>
  <div flex class="current-state-indicator {{main.viewState}}" ng-if="main.viewState !== 'all'">&nbsp;</div>
  <div class="project-settings" layout="row" layout-align="end center">
    <div ng-if="main.viewState !== 'all'" flex class="back-to-all-items" layout="row"><div class="back-icon">← </div><md-button md-no-ink class="md-primary" ng-click="main.loadAllPosts()">Неотсортированные идеи</md-button></div>
    <div>Проект:</div>
    <md-menu md-position-mode="target-right target">
    <md-button md-no-ink class="md-primary" ng-click="main.openSelectProjectMenu($mdOpenMenu, $event)">IMWU</md-button>
      <md-menu-content width="4">
        <md-menu-item>
          <md-button ng-click="ctrl.redial($event)">
            Project 1
          </md-button>
        </md-menu-item>
        <md-menu-item>
          <md-button ng-click="ctrl.checkVoicemail()">
            Project 2
          </md-button>
        </md-menu-item>
        <md-menu-divider></md-menu-divider>
        <md-menu-item>
          <md-button ng-click="ctrl.toggleNotifications()">
            Добавить проект
          </md-button>
        </md-menu-item>
      </md-menu-content>
    </md-menu>
    <div>Сортировка:</div>
    <md-menu md-position-mode="target-right target">
      <md-button md-no-ink class="md-primary" ng-click="main.openOrderType($mdOpenMenu, $event)">{{main.orderTypeText}}</md-button>
      <md-menu-content width="4">
        <md-menu-item>
          <md-button ng-click="main.changeOrderType('-id', $event)">
            дате создания
          </md-button>
        </md-menu-item>
        <md-menu-item>
          <md-button ng-click="main.changeOrderType('-likes', $event)">
            по просмотрам
          </md-button>
        </md-menu-item>
      </md-menu-content>
    </md-menu>
  </div>
  <md-content>

    <div flex layout-align="space-between stretch" class="main-content">
      <md-grid-list
        md-cols="1" md-cols-sm="3" md-cols-md="6" md-cols-gt-md="9"
        md-row-height="40px"
        md-gutter="25px" md-gutter-gt-sm="25px">
        <md-grid-tile ng-repeat="awesomeThing in main.awesomeThings | orderBy: main.orderField"
                      class="droppable draggable drag-drop md-whiteframe-1dp"
                      md-rowspan="{{awesomeThing.row}}"
                      item-id = "{{awesomeThing.id}}"
                      md-colspan="{{awesomeThing.col}}" layout="row" layout-align="center stretch">
            <div flex layout="column" layout-align="center stretch" style="align-self: stretch">
              <div flex class="tile-text {{awesomeThing.itemStyle}}" ng-click="main.viewPost(awesomeThing.id, $event)">
                <p>{{ awesomeThing.description }}</p>
              </div>
              <div class="action-panel">
                <div flex layout="row">
                  <md-button aria-label="like" class="md-icon-button" ng-click="main.addLike(awesomeThing.id)">
                    <i class="material-icons" ng-class="awesomeThing.liked ? 'item-liked' : 'item-waiting-for-like'">favorite_border</i>
                  </md-button>

                  <div class="likes-count">{{awesomeThing.likes}}</div>
                  <div flex class="author">{{awesomeThing.fname}} {{awesomeThing.lname}}</div>
                </div>
              </div>
            </div>
            <div flex="40" ng-if="awesomeThing.hasImage" class="tile-image" ng-style="{'background' : 'url({{awesomeThing.img}}) no-repeat'}"></div>
        </md-grid-tile>
      </md-grid-list>
    </div>
    <footer>
      <acme-navbar creation-date="main.creationDate" parent-model="main"></acme-navbar>
    </footer>
  </md-content>

</div>
