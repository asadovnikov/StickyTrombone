{"version":3,"sources":["scripts/app.js"],"names":["angular","module","webDevTec","$http","getTec","dataObj","this","config","params","rows","fname","lname","description","likes","callback","id","jsonp","success","data","$inject","service","acmeMalarkey","malarkey","linkFunc","scope","el","attr","vm","watcher","typist","typeSpeed","deleteSpeed","pauseDelay","loop","postfix","addClass","forEach","extraValues","value","type","pause","$watch","contributors","contributor","login","$on","MalarkeyController","$log","githubContributor","activate","getContributors","then","info","directive","restrict","template","link","controller","controllerAs","acmeNavbar","NavbarController","moment","relativeDate","creationDate","fromNow","templateUrl","parentModel","bindToController","limit","getContributorsComplete","response","getContributorsFailed","error","toJson","get","apiHost","factory","MainController","$timeout","toastr","$filter","$scope","$mdDialog","ViewPostController","post","myComment","received","avatar","comments","digest","DialogController","postText","imageUrl","hide","cancel","createNewPost","console","log","text","image","handlePaste","e","i","originalEvent","clipboardData","items","length","item","indexOf","urlCreator","window","URL","webkitURL","createObjectURL","getAsFile","dragMoveListener","event","target","getAttribute","setAttribute","dx","dy","x","parseFloat","y","style","webkitTransform","transform","classAnimation","showToastr","addLike","postID","awesomeThings","liked","toDoItems","doLaterItems","doNotDoItems","orderField","orderTypeText","originatorEv","selectOrderItem","viewPost","postId","ev","stopPropagation","postItem","show","locals","parent","element","document","body","targetEvent","clickOutsideToClose","fullscreen","openSelectProjectMenu","$mdOpenMenu","createPost","hasImage","push","img","col","row","$apply","$digest","openOrderType","changeOrderType","currentTarget","innerText","interact","draggable","inertia","snap","endOnly","restriction","elementRect","top","left","bottom","right","autoScroll","onmove","onend","dropzone","overlap","ondropactivate","classList","add","ondragenter","draggableElement","relatedTarget","dropzoneElement","ondragleave","remove","ondrop","index","areaType","splice","ondropdeactivate","rowSpan","Math","floor","colSpan","filter","input","len","runBlock","debug","run","routeConfig","$routeProvider","when","otherwise","redirectTo","constant","$logProvider","toastrConfig","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","$templateCache","put"],"mappings":"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","file":"scripts/app-1aafb1f49a.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('stickyTrombone', ['ngAnimate', 'ngCookies', 'ngSanitize', 'ngMessages', 'ngAria', 'ngResource', 'ngRoute', 'ngMaterial', 'toastr', 'cfp.hotkeys']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n      .module('stickyTrombone')\n      .service('webDevTec', webDevTec);\n\n  /** @ngInject */\n  function webDevTec($http) {\n    var dataObj;\n\n    this.getTec = getTec;\n\n    var config = {\n      params: {\n        'rows': 100,\n        'fname': '{firstName}',\n        'lname': '{lastName}',\n        'description': '{lorem|30}',\n        'likes' : '{number|100}',\n        'callback': \"JSON_CALLBACK\",\n        'id': '{index}'\n      }\n    };\n\n    $http.jsonp(\"http://www.filltext.com\", config, {}).\n    success(function (data) {\n\n      dataObj = data;\n    });\n\n    function getTec() {\n      return dataObj;\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('stickyTrombone')\n    .directive('acmeMalarkey', acmeMalarkey);\n\n  /** @ngInject */\n  function acmeMalarkey(malarkey) {\n    var directive = {\n      restrict: 'E',\n      scope: {\n        extraValues: '='\n      },\n      template: '&nbsp;',\n      link: linkFunc,\n      controller: MalarkeyController,\n      controllerAs: 'vm'\n    };\n\n    return directive;\n\n    function linkFunc(scope, el, attr, vm) {\n      var watcher;\n      var typist = malarkey(el[0], {\n        typeSpeed: 40,\n        deleteSpeed: 40,\n        pauseDelay: 800,\n        loop: true,\n        postfix: ' '\n      });\n\n      el.addClass('acme-malarkey');\n\n      angular.forEach(scope.extraValues, function(value) {\n        typist.type(value).pause().delete();\n      });\n\n      watcher = scope.$watch('vm.contributors', function() {\n        angular.forEach(vm.contributors, function(contributor) {\n          typist.type(contributor.login).pause().delete();\n        });\n      });\n\n      scope.$on('$destroy', function () {\n        watcher();\n      });\n    }\n\n    /** @ngInject */\n    function MalarkeyController($log, githubContributor) {\n      var vm = this;\n\n      vm.contributors = [];\n\n      activate();\n\n      function activate() {\n        return getContributors().then(function() {\n          $log.info('Activated Contributors View');\n        });\n      }\n\n      function getContributors() {\n        return githubContributor.getContributors(10).then(function(data) {\n          vm.contributors = data;\n\n          return vm.contributors;\n        });\n      }\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('stickyTrombone')\n    .directive('acmeNavbar', acmeNavbar);\n\n  /** @ngInject */\n  function acmeNavbar() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/navbar.html',\n      scope: {\n          creationDate: '=',\n          parentModel: '='\n      },\n      controller: NavbarController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NavbarController(moment) {\n      var vm = this;\n\n      // \"vm.creationDate\" is available by directive option \"bindToController: true\"\n      vm.relativeDate = moment(vm.creationDate).fromNow();\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('stickyTrombone')\n    .factory('githubContributor', githubContributor);\n\n  /** @ngInject */\n  function githubContributor($log, $http) {\n    var apiHost = 'https://api.github.com/repos/Swiip/generator-gulp-angular';\n\n    var service = {\n      apiHost: apiHost,\n      getContributors: getContributors\n    };\n\n    return service;\n\n    function getContributors(limit) {\n      if (!limit) {\n        limit = 30;\n      }\n\n      return $http.get(apiHost + '/contributors?per_page=' + limit)\n        .then(getContributorsComplete)\n        .catch(getContributorsFailed);\n\n      function getContributorsComplete(response) {\n        return response.data;\n      }\n\n      function getContributorsFailed(error) {\n        $log.error('XHR Failed for getContributors.\\n' + angular.toJson(error.data, true));\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('stickyTrombone')\n    .controller('MainController', MainController)\n    .filter('getById', function() {\n    return function(input, id) {\n      var i=0, len=input.length;\n      for (; i<len; i++) {\n        if (+input[i].id == +id) {\n          return input[i];\n        }\n      }\n      return null;\n    }\n  });\n\n  /** @ngInject */\n  function MainController($timeout, $http, toastr, $filter, $scope, $mdDialog) {\n    var vm = this;\n\n    vm.awesomeThings = [];\n    vm.toDoItems = [];\n    vm.doLaterItems = [];\n    vm.doNotDoItems = [];\n    vm.classAnimation = '';\n    vm.creationDate = 1463047443957;\n    vm.showToastr = showToastr;\n    vm.addLike = addLike;\n    vm.orderField = '-likes';\n    vm.orderTypeText = 'по просмотрам';\n    var originatorEv;\n    var selectOrderItem;\n    //vm.customFullscreen = $mdMedia('xs') || $mdMedia('sm');\n\n    vm.viewPost = function(postId, ev){\n      ev.stopPropagation();\n      var postItem = $filter('getById')(vm.awesomeThings, postId);\n      $mdDialog.show({\n        controller: ViewPostController,\n        template: '<md-dialog aria-label=\"viewPost\" ng-cloak>' +\n        '<form class=\"a-md-dialog post-view-dialog\">' +\n          '<div flex layout=\"row\">' +\n            '<div flex layout=\"column\" layout-align=\"center stretch\" style=\"align-self: stretch\">' +\n              '<div flex class=\"tile-text\">' +\n                '<p>{{post.description }}</p>' +\n              '</div>' +\n            '<div class=\"action-panel\">' +\n              '<div flex layout=\"row\">' +\n                '<md-button aria-label=\"like\" class=\"md-icon-button\">' +\n                  '<i class=\"material-icons\">favorite_border</i>' +\n                '</md-button>' +\n                '<div class=\"likes-count\">{{post.likes}}</div>' +\n                '<div flex class=\"author\">{{post.fname}} {{post.lname}}</div>' +\n              '</div>' +\n            '</div>' +\n            '</div>' +\n            '<div flex=\"40\" ng-if=\"post.hasImage\" class=\"tile-image\" ng-style=\"{\\'background\\' : \\'url({{post.img}}) no-repeat\\'}\"></div>' +\n          '</div>' +\n          '<div flex layout=\"column\" class=\"post-comments-area\">' +\n            '<div class=\"comment-to-post\" ng-repeat=\"comment in comments\" layout=\"row\">' +\n                '<div>' +\n                  '<div class=\"comment-avatar\" ng-style=\"{\\'background\\' : \\'url({{comment.avatar}}) no-repeat\\'}\"></div>' +\n                '</div>' +\n                '<div layout=\"column\" class=\"comment-info\">' +\n                  '<div class=\"comment-user-name\">{{comment.fname}} {{comment.lname}}</div>'+\n                  '<div class=\"comment-text\">{{comment.description}}</div>'+\n                ' </div>' +\n            '</div>' +\n            '<div class=\"my-comment-container\" layout=\"row\">' +\n              '<div class=\"avatar-container\">' +\n                '<div class=\"my-avatar-small\"></div>'+\n              '</div>'+\n              '<md-input-container flex=\"100\">' +\n                '<label>Оставьте комментарий...</label>' +\n                '<input ng-model=\"myComment\">' +\n              '</md-input-container>' +\n            '</div>' +\n          '</div>'+\n        '</form>' +\n        '</md-dialog>',\n        locals:{\n          post: postItem\n        },\n        parent: angular.element(document.body),\n        targetEvent: ev,\n        clickOutsideToClose:true,\n        fullscreen: false\n      });\n    };\n\n    function ViewPostController($scope, $mdDialog, post){\n      $scope.post = post;\n      $scope.myComment = \"\";\n      var config = {\n        params: {\n          'rows': 3,\n          'fname': '{firstName}',\n          'lname': '{lastName}',\n          'description': '{lorem|15}',\n          'callback': \"JSON_CALLBACK\",\n          'id': '{index}'\n        }\n      };\n      $http.jsonp(\"http://www.filltext.com\", config, {}).\n      success(function (data) {\n        angular.forEach(data, function(received){\n            received.avatar = \"https://unsplash.it/100/100?random\";\n        });\n        $scope.comments = data;\n        $scope.digest();\n      });\n    };\n\n\n    vm.openSelectProjectMenu = function($mdOpenMenu, ev){\n      originatorEv = ev;\n      $mdOpenMenu(ev);\n    };\n\n    vm.createPost = function(ev){\n      //var useFullScreen = ($mdMedia('sm') || $mdMedia('xs'))  && vm.customFullscreen;\n      $mdDialog.show({\n        controller: DialogController,\n        template: '<md-dialog aria-label=\"create a post\" class=\"create-post-dailog\" ng-cloak>' +\n        '<form>' +\n        '<div layout-align=\"column\" class=\"a-md-dialog\">' +\n        '  <div flex=\"100\" class=\"input-container\">' +\n        '   <md-input-container flex class=\"create-post-input md-block\">' +\n        '     <label>Есть идея? Пиши прямо тут!</label>' +\n        '     <textarea rows=\"2\" ng-paste=\"handlePaste($event)\" ng-model=\"postText\" hotkey=\"{\\'shift+enter\\': createNewPost}\"></textarea> ' +\n        '   </md-input-container>' +\n          '<img src=\"{{imageUrl}}\" style=\"height: 66px; width: 66px;\" ng-show=\"imageUrl.length > 0\" />'+\n        ' </div>' +\n        ' <div flex=\"100\" class=\"create-post-hint\" ng-hide=\"imageUrl.length > 0\">Чтобы присоединить картинку, перетяни ее в окно браузера или просто вставь ссылку.</div>' +\n\n        '</div>' +\n\n        '<md-button flex=\"100\" class=\"create-post-btn\" ng-show=\"postText.length > 0\" ng-click=\"createNewPost()\">Запостить!</md-button>' +\n\n        '<div class=\"create-post-action-hint\" ng-show=\"postText.length > 0\" >Подсказка: ⇧ + Enter</div>'+\n        '</form>' +\n        '</md-dialog>'\n        ,\n        parent: angular.element(document.body),\n        targetEvent: ev,\n        clickOutsideToClose:false,\n        fullscreen: false\n      }).then(function(post){\n        var hasImage = post.image.length > 0;\n        vm.awesomeThings.push(\n          {\n            'fname' : 'Me',\n            'lname': 'Gusta',\n            'description' : post.text,\n            'likes' : 0,\n            'img' : post.image,\n            'hasImage' : hasImage,\n            'col' : 4,\n            'row' : 8,\n            'id' : 101\n          });\n          $scope.$apply();\n          $scope.$digest();\n      });\n    };\n\n    function DialogController($scope, $mdDialog) {\n      $scope.postText = \"\";\n      $scope.imageUrl = \"\";\n      $scope.hide = function() {\n        $mdDialog.hide();\n      };\n      $scope.cancel = function() {\n        $mdDialog.cancel();\n      };\n      $scope.createNewPost = function() {\n        console.log($scope.postText);\n        $mdDialog.hide({'text' : $scope.postText, 'image' : $scope.imageUrl});\n      };\n      $scope.handlePaste = function(e){\n        for (var i = 0 ; i < e.originalEvent.clipboardData.items.length ; i++) {\n          var item = e.originalEvent.clipboardData.items[i];\n          if (item.type.indexOf(\"image\") != -1) {\n            var urlCreator = window.URL || window.webkitURL;\n            var imageUrl = urlCreator.createObjectURL( item.getAsFile() );\n            $scope.imageUrl = imageUrl;\n          } else {\n            console.log(\"Discarding non-image paste data\");\n          }\n        }\n      };\n    }\n\n    vm.openOrderType = function($mdOpenMenu, ev){\n      selectOrderItem = ev;\n      $mdOpenMenu(ev);\n    };\n\n    vm.changeOrderType = function(value, ev){\n      vm.orderField = value;\n      vm.orderTypeText = ev.currentTarget.innerText;\n      $scope.$apply();\n      $scope.$digest();\n    };\n\n    interact('.draggable')\n      .draggable({\n        // enable inertial throwing\n        inertia: true,\n        snap: {\n          endOnly: true\n        },\n        // keep the element within the area of it's parent\n        restrict: {\n          restriction: \"parent\",\n          endOnly: true,\n          elementRect: { top: 0, left: 0, bottom: 1, right: 1 }\n        },\n        // enable autoScroll\n        autoScroll: false,\n\n        // call this function on every dragmove event\n        onmove: dragMoveListener,\n        // call this function on every dragend event\n        onend: function (event) {\n          event.target.setAttribute('startDrag', 'false');\n          var target = event.target,\n          // keep the dragged position in the data-x/data-y attributes\n            x = (parseFloat(target.getAttribute('initial-data-x')) || 0),\n            y = (parseFloat(target.getAttribute('initial-data-y')) || 0);\n          // translate the element\n          target.style.webkitTransform =\n            target.style.transform =\n              'translate(' + x + 'px, ' + y + 'px)';\n        }\n      });\n\n    function dragMoveListener (event) {\n      if(event.target.getAttribute('startDrag') !== 'true')\n      {\n        event.target.setAttribute('initial-data-x', event.dx);\n        event.target.setAttribute('initial-data-y', event.dy);\n      }\n      var target = event.target,\n      // keep the dragged position in the data-x/data-y attributes\n        x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,\n        y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;\n      target.setAttribute('startDrag', 'true');\n      // translate the element\n      target.style.webkitTransform =\n        target.style.transform =\n          'translate(' + x + 'px, ' + y + 'px)';\n\n      // update the posiion attributes\n      target.setAttribute('data-x', x);\n      target.setAttribute('data-y', y);\n    }\n\n    // this is used later in the resizing and gesture demos\n    //window.dragMoveListener = dragMoveListener;\n\n    interact('.dropzone').dropzone({\n      // Require a 75% element overlap for a drop to be possible\n      overlap: 0.10,\n\n      // listen for drop related events:\n\n      ondropactivate: function (event) {\n        // add active dropzone feedback\n        event.target.classList.add('drop-active');\n      },\n      ondragenter: function (event) {\n        var draggableElement = event.relatedTarget,\n          dropzoneElement = event.target;\n\n        // feedback the possibility of a drop\n        dropzoneElement.classList.add('drop-target');\n        draggableElement.classList.add('can-drop');\n        //draggableElement.textContent = 'Dragged in';\n      },\n      ondragleave: function (event) {\n        // remove the drop feedback style\n        event.target.classList.remove('drop-target');\n        event.relatedTarget.classList.remove('can-drop');\n        //event.relatedTarget.textContent = 'Dragged out';\n      },\n      ondrop: function (event) {\n        var id = event.relatedTarget.getAttribute('item-id');\n        var item = $filter('getById')(vm.awesomeThings, id);\n        var index = vm.awesomeThings.indexOf(item);\n\n        var areaType = event.target.getAttribute('drop-area');\n\n        if(areaType === 'do-not-do'){\n          vm.doNotDoItems.push(item);\n        }\n        else if(areaType === 'do-later'){\n          vm.doLaterItems.push(item);\n        }\n        else if(areaType === 'do'){\n          vm.toDoItems.push(item);\n        }\n\n        vm.awesomeThings.splice(index, 1);\n        $scope.$apply();\n        $scope.$digest();\n        //event.relatedTarget.textContent = 'Dropped';\n      },\n      ondropdeactivate: function (event) {\n        // remove active dropzone feedback\n        event.target.classList.remove('drop-active');\n        event.target.classList.remove('drop-target');\n      }\n    });\n\n    activate();\n\n    function activate() {\n      $timeout(function() {\n        vm.classAnimation = 'rubberBand';\n      }, 4000);\n    }\n\n    function showToastr() {\n      toastr.info('Fork <a href=\"https://github.com/Swiip/generator-gulp-angular\" target=\"_blank\"><b>generator-gulp-angular</b></a>');\n      vm.classAnimation = '';\n    }\n\n    function addLike(postID){\n      angular.forEach(vm.awesomeThings, function(item) {\n        if(item.id === postID)\n        {\n          if(item.liked !== true) {\n            item.likes += 1;\n            item.liked = true;\n          }\n        }\n      });\n    }\n\n    var config = {\n      params: {\n        'rows': 100,\n        'fname': '{firstName}',\n        'lname': '{lastName}',\n        'description': '{lorem|10}',\n        'likes' : '{number|50}',\n        'callback': \"JSON_CALLBACK\",\n        'id': '{index}'\n      }\n    };\n\n    $http.jsonp(\"http://www.filltext.com\", config, {}).\n    success(function (data) {\n      angular.forEach(data, function(received){\n        //if has image, and col span 2 should be set\n\n        var rowSpan  = Math.floor(received.likes/10);\n        var colSpan = Math.floor(rowSpan/2);\n        if(colSpan === 0)\n        {\n          colSpan +=1;\n        }\n        if(rowSpan%10 > 3)\n        {\n          received.img = \"https://unsplash.it/300/500?random\";\n          colSpan+=2;\n          received.hasImage = true;\n        }\n        received.row = rowSpan + 4;\n        received.col = colSpan + 1;\n\n      });\n      vm.awesomeThings = data;\n\n      //$scope.digest();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('stickyTrombone')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('stickyTrombone')\n    .config(routeConfig);\n\n  function routeConfig($routeProvider) {\n    $routeProvider\n      .when('/', {\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      })\n      .otherwise({\n        redirectTo: '/'\n      });\n  }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('stickyTrombone')\n    .constant('malarkey', malarkey)\n    .constant('moment', moment);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('stickyTrombone')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 3000;\n    toastrConfig.positionClass = 'toast-top-right';\n    toastrConfig.preventDuplicates = true;\n    toastrConfig.progressBar = true;\n  }\n\n})();\n\nangular.module(\"stickyTrombone\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/create-post.html\",\"<md-dialog aria-label=viewPost ng-cloak><form><div flex layout=row class=a-md-dialog><div flex layout=column layout-align=\\\"center stretch\\\" style=\\\"align-self: stretch\\\"><div flex class=tile-text><p>{{post.description }}</p></div><div class=action-panel><div flex layout=row><md-button aria-label=like class=md-icon-button><i class=material-icons ng-class=\\\"post.liked ? \\'item-liked\\' : \\'item-waiting-for-like\\'\\\">favorite_border</i></md-button><div class=likes-count>{{post.likes}}</div><div flex class=author>{{post.fname}} {{post.lname}}</div></div></div></div><div flex=40 ng-if=post.hasImage class=tile-image ng-style=\\\"{\\'background\\' : \\'url({{post.img}}) no-repeat\\'}\\\"></div></div></form></md-dialog>\");\n$templateCache.put(\"app/main/main.html\",\"<div><md-button class=\\\"md-fab md-mini\\\" aria-label=\\\"Eat cake\\\" ng-click=main.createPost($event)><i class=material-icons>add</i></md-button><div class=project-settings layout=row layout-align=\\\"end center\\\"><div>Проект:</div><md-menu md-position-mode=\\\"target-right target\\\"><md-button md-no-ink class=md-primary ng-click=\\\"main.openSelectProjectMenu($mdOpenMenu, $event)\\\">IMWU</md-button><md-menu-content width=4><md-menu-item><md-button ng-click=ctrl.redial($event)>Project 1</md-button></md-menu-item><md-menu-item><md-button ng-click=ctrl.checkVoicemail()>Project 2</md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button ng-click=ctrl.toggleNotifications()>Добавить проект</md-button></md-menu-item></md-menu-content></md-menu><div>Сортировка:</div><md-menu md-position-mode=\\\"target-right target\\\"><md-button md-no-ink class=md-primary ng-click=\\\"main.openOrderType($mdOpenMenu, $event)\\\">{{main.orderTypeText}}</md-button><md-menu-content width=4><md-menu-item><md-button ng-click=\\\"main.changeOrderType(\\'-id\\', $event)\\\">дате создания</md-button></md-menu-item><md-menu-item><md-button ng-click=\\\"main.changeOrderType(\\'-likes\\', $event)\\\">по просмотрам</md-button></md-menu-item></md-menu-content></md-menu></div><md-content><div flex layout-align=\\\"space-between stretch\\\" class=main-content><md-grid-list md-cols=1 md-cols-sm=2 md-cols-md=3 md-cols-gt-md=12 md-row-height=1em md-gutter=30px md-gutter-gt-sm=30px><md-grid-tile ng-repeat=\\\"awesomeThing in main.awesomeThings | orderBy: main.orderField\\\" class=\\\"droppable draggable drag-drop md-whiteframe-1dp\\\" md-rowspan={{awesomeThing.row}} item-id={{awesomeThing.id}} md-colspan={{awesomeThing.col}} layout=row layout-align=\\\"center stretch\\\"><div flex layout=column layout-align=\\\"center stretch\\\" style=\\\"align-self: stretch\\\"><div flex class=tile-text ng-click=\\\"main.viewPost(awesomeThing.id, $event)\\\"><p>{{ awesomeThing.description }}</p></div><div class=action-panel><div flex layout=row><md-button aria-label=like class=md-icon-button ng-click=main.addLike(awesomeThing.id)><i class=material-icons ng-class=\\\"awesomeThing.liked ? \\'item-liked\\' : \\'item-waiting-for-like\\'\\\">favorite_border</i></md-button><div class=likes-count>{{awesomeThing.likes}}</div><div flex class=author>{{awesomeThing.fname}} {{awesomeThing.lname}}</div></div></div></div><div flex=40 ng-if=awesomeThing.hasImage class=tile-image ng-style=\\\"{\\'background\\' : \\'url({{awesomeThing.img}}) no-repeat\\'}\\\"></div></md-grid-tile></md-grid-list></div><footer><acme-navbar creation-date=main.creationDate parent-model=main></acme-navbar></footer></md-content></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<md-toolbar layout=row layout-align=\\\"center center\\\" class=\\\"decision-panel dropzone\\\"><div class=\\\"decision-panel_do-not-do dropzone\\\" drop-area=do-not-do flex=33>Не делай <span ng-if=\\\"vm.parentModel.doNotDoItems.length>0\\\">— {{vm.parentModel.doNotDoItems.length}}</span></div><div flex=33 class=\\\"decision-panel_do-it-later dropzone\\\" drop-area=do-later>Давай потом <span ng-if=\\\"vm.parentModel.doLaterItems.length>0\\\">— {{vm.parentModel.doLaterItems.length}}</span></div><div flex=33 class=\\\"decision-panel_do-it dropzone\\\" drop-area=do>Делай <span ng-if=\\\"vm.parentModel.toDoItems.length>0\\\">— {{vm.parentModel.toDoItems.length}}</span></div></md-toolbar>\");}]);"],"sourceRoot":"/source/"}